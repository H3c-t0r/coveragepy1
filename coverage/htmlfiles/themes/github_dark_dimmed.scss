/* Licensed under the Apache License: http://www.apache.org/licenses/LICENSE-2.0 */
/* For details: https://github.com/nedbat/coveragepy/blob/master/NOTICE.txt */

// CSS styles for coverage.py HTML reports.
// GitHub Dark dimmed theme (implemented by Lord Baryhobal)

// When you edit this file, you need to run "make css" to get the CSS file
// generated, and then check in both the .scss and the .css files.

// When working on the file, this command is useful:
//      sass --watch --style=compact --sourcemap=none --no-cache coverage/htmlfiles/themes/github_dark_dimmed.scss:coverage/htmfiles/themes/github_dark_dimmed.css
//
// OR you can process sass purely in python with `pip install pysass`, then:
//      pysassc --style=compact coverage/htmlfiles/themes/github_dark_dimmed.scss coverage/htmlfiles/themes/github_dark_dimmed.css

// Ignore this comment, it's for the CSS output file:
/* Don't edit this .css file. Edit the .scss file instead! */

//
// Declare colors and variables
//

$font-normal:         -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
$font-code:           SFMono-Regular, SF Mono, Menlo, Consolas, "Liberation Mono", monospace;
$font-kbd:            11px ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;

$bg:                  #22272e;
$bg2:                 #2d333b;
$border:              #444c56;
$color:               #adbac7;
$comment:             #768390;
$string:              #96d0ff;
$keyword:             #f47067;

$green:               #57ab5a;
$yellow:              #c69026;
$red:                 #c93c37;
$grey:                #373e47;

$green-active:        #8ddb8c;
$yellow-active:       #eac55f;
$red-active:          #f47067;
$grey-active:         #545d68;

$btn-border:          rgba(#cdd9e5, 0.1);

$green-txt:           #ffffff;
$yellow-txt:          #444;
$red-txt:             #222;
$grey-txt:            #adbac7;

$green2:              $green;
$yellow2:             #ae7c14;
$red2:                #e5534b;
$grey2:               $comment;

$footer:              #768390;
$line-hover:          rgba($yellow2, 0.15);
$line-green:          rgba($green2, 0.15);
$line-green-border:   rgba($green2, 0.30);
$line-green-hover:    rgba($green2, 0.60);

$line-yellow:         rgba($yellow2, 0.15);
$line-yellow-border:  rgba($yellow2, 0.30);
$line-yellow-hover:   rgba($yellow2, 0.60);

$line-red:            rgba($red2, 0.15);
$line-red-border:     rgba($red2, 0.30);
$line-red-hover:      rgba($red2, 0.60);

$line-grey:           rgba($grey2, 0.15);
$line-grey-border:    rgba($grey2, 0.30);
$line-grey-hover:     rgba($grey2, 0.60);

$line-blue:           rgba(#4184e4, 0.15);

$outline:             #539bf5;

$overlay:             #2d333b;
$border-kbd:          rgba(#636e7b, 0.4);

$highlight:           rgba(#ffd54f, 0.3);

//
// Mixins and utilities
//

// Add visual outline to navigable elements on focus improve accessibility.
@mixin focus-border {
    &:active, &:focus {
        outline: 2px solid $outline;
        outline-offset: -2px;
    }
}

// Page-wide styles
:root {
    color-scheme: dark;
}

body {
    background-color: $bg;
    color: $color;
    font-family: $font-normal;
}
html > body {
    font-size: 12px;
}

html > body.indexfile {
    font-size: 16px;
}

p {
    font-size: inherit;
    line-height: 20px;
}

a {
    @include focus-border;
}

// Page structure
body.indexfile header {
    h1 {
        flex-grow: 1;
    }

    .content {
        display: flex;
        align-items: center;
        padding: 16px;
        gap: 16px;
        flex-wrap: wrap;

        .text {
            margin: 0;
            order: 2;
            flex-basis: 100%;
        }
    }
}

header {
    background-color: $bg2;
    border-bottom-color: $border;

    p.text {
        color: $color;
    }

    &.sticky {
        height: unset;

        .text {
            display: none;
        }
    }
}

footer {
    .content {
        color: $footer;
    }
}

// Header styles
body.indexfile #filter_container {
    float: initial;
    margin: 0;
}


#filter_container {
    input {
        width: 10em;
        font-size: 14px;
        line-height: 20px;
        padding: 5px 12px;
        color: $color;
        border: 2px solid $border;
        background-color: $bg;
        border-radius: 6px;
        vertical-align: middle;
        transition: 80ms cubic-bezier(0.33, 1, 0.68, 1);
        transition-property: color,background-color,box-shadow,border-color;

        &:focus:not(:focus-visible) {
            outline: none;
            box-shadow: inset 0 0 0 1px transparent;
        }

        &:focus-visible {
            outline: none;
            box-shadow: inset 0 0 0 1px $outline;
        }
    }
}


header button {
    padding: 5px 16px;
    font-size: 14px;
    font-weight: 500;
    line-height: 20px;
    vertical-align: middle;
    border: 1px solid;
    border-radius: 6px;
    border-color: $btn-border;
    appearance: none;

    @include focus-border;

    &.run {
        background-color: $green;
        color: $green-txt;
        &.show_run {
            background-color: $green-active;
            border-color: $btn-border;
        }
    }
    &.mis {
        background-color: $red;
        color: $red-txt;
        &.show_mis {
            background-color: $red-active;
            border-color: $btn-border;
        }
    }
    &.exc {
        background-color: $grey;
        color: $grey-txt;
        &.show_exc {
            background-color: $grey-active;
            border-color: $btn-border;
        }
    }
    &.par {
        background-color: $yellow;
        color: $yellow-txt;
        &.show_par {
            background-color: $yellow-active;
            border-color: $btn-border;
        }
    }
}

// Yellow post-it things.
%popup {
    background-color: $overlay;
    border-radius: 6px;
    border-color: $border;
    color: $color;
    padding: 8px 16px;
}

// Help panel
body.indexfile #help_panel_wrapper {
    float: initial;
    order: 1;
}

#help_panel_wrapper {
    label {
        cursor: pointer;
    }
}

#help_panel {
    @extend %popup;

    .legend {
        font-size: 12px;
        font-weight: 600;
    }
}

kbd {
    color: $color;
    background-color: $bg2;
    display: inline-block;
    padding: 3px 5px;
    font: $font-kbd;
    line-height: 10px;
    vertical-align: middle;
    border: 1px solid $border-kbd;
    border-radius: 6px;
    box-shadow: inset 0 -1px 0 $border-kbd;
}


// Source file styles

// The slim bar at the left edge of the source lines, colored by coverage.
$border-indicator-width: .2em;

#source {
    font-family: $font-code;

    p {
        // position relative makes position:absolute pop-ups appear in the right place.
        .n {
            &.highlight {
                background-color: $highlight;
            }
        }

        .t {
            border-left-color: $border;

            &:hover {
                background-color: $line-hover;
            }

            // Syntax coloring
            .com {
                color: $comment;
            }
            .key {
                color: $keyword;
                font-weight: normal;
            }
            .str {
                color: $string;
            }
        }

        &.mis {
            .t {
                border-left-color: $line-red-border;
            }

            &.show_mis .t {
                background-color: $line-red;

                &:hover {
                    background-color: $line-red-hover;
                }
            }
        }

        &.run {
            .t {
                border-left-color: $line-green-border;
            }

            &.show_run .t {
                background-color: $line-green;

                &:hover {
                    background-color: $line-green-hover;
                }
            }
        }

        &.exc {
            .t {
                border-left-color: $line-grey-border;
            }

            &.show_exc .t {
                background-color: $line-grey;

                &:hover {
                    background-color: $line-grey-hover;
                }
            }
        }

        &.par {
            .t {
                border-left-color: $line-yellow-border;
            }

            &.show_par .t {
                background-color: $line-yellow;

                &:hover {
                    background-color: $line-yellow-hover;
                }
            }

        }

        .annotate {
            font-family: $font-normal;
            color: $color;
        }

        input {
            & ~ .r label.ctx {
                &:hover {
                    background-color: $line-blue;
                    color: $color;
                }
            }

            &:checked ~ .r label.ctx {
                background-color: $line-blue;
                color: $color;
            }
        }

        label.ctxt {
            color: $color;
        }

        .ctxs {
            background-color: $line-blue;
            color: $color;
        }
    }
}


// index styles
#index {
    font-family: $font-code;

    td, th {
        border-bottom-color: $border;
        padding: 8px;
    }
    th {
        color: $color;

        &:hover,
        &[aria-sort="ascending"], &[aria-sort="descending"] {
            background-color: $bg2;
        }
    }

    tr.total td,
    tr.total_dynamic td {
        border-top-color: $border;
    }
    tr.file:hover {
        background-color: $bg2;
    }
}

// scroll marker styles
#scroll_marker {
    background-color: $bg;
    border-color: $border;

    .marker {
        background-color: $border;
    }
}
